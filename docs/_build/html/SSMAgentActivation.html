<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SSMAgentActivation Documentation &mdash; DCinema Distribution AWS Resources 1.0.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SSMInstallScriptGenerator Documentation" href="SSMInstallScriptGenerator.html" />
    <link rel="prev" title="CustomAuthorizer Documentation" href="CustomAuthorizer.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            DCinema Distribution AWS Resources
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="template.html">Cloudformation Template</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Lambda Function</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ExpeDatSSMRunDocumet.html">ExpeDatSSMRunDocumet Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="ExpeDatSSMInvocationQuery.html">ExpeDatSSMInvocationQuery Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="SSMNotification.html">SSMNotification Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="DashboardFunction.html">DashboardFunction Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="CustomAuthorizer.html">CustomAuthorizer Documentation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">SSMAgentActivation Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="SSMInstallScriptGenerator.html">SSMInstallScriptGenerator Documentation</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DCinema Distribution AWS Resources</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">Lambda Function</a></li>
      <li class="breadcrumb-item active">SSMAgentActivation Documentation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/SSMAgentActivation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-SSMAgentActivation.index">
<span id="ssmagentactivation-documentation"></span><h1>SSMAgentActivation Documentation<a class="headerlink" href="#module-SSMAgentActivation.index" title="Permalink to this headline"></a></h1>
<p>This function creates activation code and id for SSM agent and stores it in SSM parameter store. It also updates the activation code and id in SSM parameter store if the activation code is not expired and the registration limit is not reached. It also adds theater id as tags to the instance.</p>
<dl class="simple">
<dt>Functions:</dt><dd><ul class="simple">
<li><p>create_activation: This function creates activation code and id for SSM agent and stores it in SSM parameter store.</p></li>
<li><p>update_ssm: This function updates the activation code and id in SSM parameter store if the activation code is not expired and the registration limit is not reached.</p></li>
<li><p>add_tags: This function adds theater id as tags to the instance.</p></li>
<li><p>update_table: This function updates the instance information in dynamodb table.</p></li>
<li><p>get_activation_code_id: This function gets the activation code and id from SSM parameter store.</p></li>
<li><p>lambda_handler: This function is the entry point for the lambda function.</p></li>
</ul>
</dd>
</dl>
<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.add_tags">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">add_tags</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theater_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theater_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theater_email</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#add_tags"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.add_tags" title="Permalink to this definition"></a></dt>
<dd><p>This function adds theater id as tags to the instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance_id</strong> (<em>str</em>) – Instance id of the instance</p></li>
<li><p><strong>theater_id</strong> (<em>str</em>) – Theater id of the instance</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from SSM parameter store</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response (dict)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">add_tags</span><span class="p">(</span><span class="n">instance_id</span><span class="p">,</span> <span class="n">theater_id</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.create_activation">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">create_activation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">registration_limit</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#create_activation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.create_activation" title="Permalink to this definition"></a></dt>
<dd><p>This function creates activation code and id for SSM agent and stores it in SSM parameter store.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>registration_limit</strong> (<em>int</em>) – Registration limit for the activation code</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Activation code for SSM agent
activation_id (str): Activation id for SSM agent</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>activation_code (str)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activation_code</span><span class="p">,</span> <span class="n">activation_id</span> <span class="o">=</span> <span class="n">create_activation</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.get_activation_code_id">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">get_activation_code_id</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#get_activation_code_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.get_activation_code_id" title="Permalink to this definition"></a></dt>
<dd><p>This function gets activation code and id from SSM parameter store if the activation code is not expired and the registration limit is not reached. If the activation code is expired or the registration limit is reached, it creates a new activation code and id and stores it in SSM parameter store.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Activation code for SSM agent
activation_id (str): Activation id for SSM agent</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>activation_code (str)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">activation_code</span><span class="p">,</span> <span class="n">activation_id</span> <span class="o">=</span> <span class="n">get_activation_code_id</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.install_deps">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">install_deps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instance_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#install_deps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.install_deps" title="Permalink to this definition"></a></dt>
<dd><p>This function installs dependencies on the instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>instance_id</strong> (<em>str</em>) – Instance id of the instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from SSM command</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response (dict)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">install_deps</span><span class="p">(</span><span class="n">instance_id</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.lambda_handler">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">lambda_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">context</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">aws_lambda_powertools.utilities.typing.lambda_context.LambdaContext</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#lambda_handler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.lambda_handler" title="Permalink to this definition"></a></dt>
<dd><p>This function is the entry point for the lambda function. It checks the api path and calls the respective function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event</strong> (<em>dict</em>) – Event data passed to the lambda function</p></li>
<li><p><strong>context</strong> (<em>LambdaContext</em>) – Lambda context object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from the function</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response (dict)</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.update_ssm">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">update_ssm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">activation_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">activation_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registration_limit</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expiration</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#update_ssm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.update_ssm" title="Permalink to this definition"></a></dt>
<dd><p>This function updates the activation code and id in SSM parameter store if the activation code is not expired and the registration limit is not reached.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>activation_code</strong> (<em>str</em>) – Activation code for SSM agent</p></li>
<li><p><strong>activation_id</strong> (<em>str</em>) – Activation id for SSM agent</p></li>
<li><p><strong>count</strong> (<em>int</em>) – Active count for the activation code</p></li>
<li><p><strong>registration_limit</strong> (<em>int</em>) – Registration limit for the activation code</p></li>
<li><p><strong>expiration</strong> (<em>str</em>) – Expiration date for the activation code</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from SSM parameter store</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response (dict)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">update_ssm</span><span class="p">(</span><span class="n">activation_code</span><span class="p">,</span> <span class="n">activation_id</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">registration_limit</span><span class="p">,</span> <span class="n">expiration</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="SSMAgentActivation.index.update_table">
<span class="sig-prename descclassname"><span class="pre">SSMAgentActivation.index.</span></span><span class="sig-name descname"><span class="pre">update_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theater_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theater_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theater_email</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instance_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/SSMAgentActivation/index.html#update_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#SSMAgentActivation.index.update_table" title="Permalink to this definition"></a></dt>
<dd><p>This function adds theater id’s tags to the theater table.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instance_id</strong> (<em>str</em>) – Instance id of the instance</p></li>
<li><p><strong>theater_id</strong> (<em>str</em>) – Theater id of the instance</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Response from SSM parameter store</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>response (dict)</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">add_tags</span><span class="p">(</span><span class="n">instance_id</span><span class="p">,</span> <span class="n">theater_id</span><span class="p">,</span> <span class="n">theater_name</span><span class="p">,</span> <span class="n">theater_email</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="CustomAuthorizer.html" class="btn btn-neutral float-left" title="CustomAuthorizer Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="SSMInstallScriptGenerator.html" class="btn btn-neutral float-right" title="SSMInstallScriptGenerator Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Prime Focus.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>